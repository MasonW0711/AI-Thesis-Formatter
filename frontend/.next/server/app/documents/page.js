(()=>{var e={};e.id=479,e.ids=[479],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3639:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=s(482),r=s(9108),n=s(2563),i=s.n(n),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2719)),"/Users/wangchunhao/github /AI-Thesis-Formatter/frontend/app/documents/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/Users/wangchunhao/github /AI-Thesis-Formatter/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/wangchunhao/github /AI-Thesis-Formatter/frontend/app/documents/page.tsx"],m="/documents/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/documents/page",pathname:"/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5019:(e,t,s)=>{Promise.resolve().then(s.bind(s,9641))},6187:()=>{},8779:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},9641:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5344),r=s(3729),n=s(6506);function i(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/documents");if(!e.ok)throw Error("獲取文件列表失敗");let s=await e.json();t(s.documents),o(null)}catch(e){o(e instanceof Error?e.message:"載入失敗")}finally{i(!1)}},[]);(0,r.useEffect)(()=>{c();let e=setInterval(c,5e3);return()=>clearInterval(e)},[c]);let d=async e=>{try{let t=await fetch(`/api/documents/${e.id}/download`);if(!t.ok){let e=await t.json();throw Error(e.detail||"下載失敗")}let s=await t.blob(),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=`格式調整_${e.filename}`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}catch(e){alert(e instanceof Error?e.message:"下載失敗")}},m=async e=>{if(confirm(`確定要刪除「${e.filename}」嗎？`))try{if(!(await fetch(`/api/documents/${e.id}`,{method:"DELETE"})).ok)throw Error("刪除失敗");c()}catch(e){alert(e instanceof Error?e.message:"刪除失敗")}},u=e=>e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`,h=e=>new Date(e).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),p=e=>{let t={uploaded:{label:"已上傳",class:"status-uploaded"},processing:{label:"處理中",class:"status-processing"},completed:{label:"已完成",class:"status-completed"},failed:{label:"處理失敗",class:"status-failed"}}[e]||{label:e,class:"status-uploaded"};return a.jsx("span",{className:`status-badge ${t.class}`,children:t.label})};return(0,a.jsxs)("div",{className:"container",style:{maxWidth:"900px",padding:"2rem 1.5rem"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[a.jsx("h1",{children:"我的文件"}),a.jsx(n.default,{href:"/upload",className:"btn btn-primary",children:"\uD83D\uDCE4 上傳新文件"})]}),l&&(0,a.jsxs)("div",{style:{padding:"1rem",background:"var(--error-500)",color:"white",borderRadius:"var(--radius)",marginBottom:"1.5rem"},children:["⚠️ ",l]}),s&&(0,a.jsxs)("div",{className:"text-center",style:{padding:"4rem 0"},children:[a.jsx("div",{style:{fontSize:"3rem"},className:"animate-spin",children:"⏳"}),a.jsx("p",{style:{marginTop:"1rem",color:"var(--gray-500)"},children:"載入中..."})]}),!s&&0===e.length&&(0,a.jsxs)("div",{className:"card text-center",style:{padding:"4rem 2rem"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\uD83D\uDCED"}),a.jsx("h3",{children:"尚無文件"}),a.jsx("p",{style:{color:"var(--gray-500)",marginBottom:"2rem"},children:"上傳您的第一份論文，開始使用格式調整功能"}),a.jsx(n.default,{href:"/upload",className:"btn btn-primary",children:"上傳論文"})]}),!s&&e.length>0&&a.jsx("div",{className:"file-list",children:e.map(e=>(0,a.jsxs)("div",{className:"file-item animate-fade-in",children:[a.jsx("div",{className:"file-icon",children:"PDF"}),(0,a.jsxs)("div",{className:"file-info",children:[a.jsx("div",{className:"file-name",children:e.filename}),(0,a.jsxs)("div",{className:"file-meta",children:[u(e.file_size)," \xb7 ",e.page_count," 頁 \xb7 ",h(e.created_at)]})]}),p(e.status),(0,a.jsxs)("div",{className:"file-actions",children:["completed"===e.status&&a.jsx("button",{className:"btn btn-success",onClick:()=>d(e),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"\uD83D\uDCE5 下載"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>m(e),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"\uD83D\uDDD1️"})]})]},e.id))})]})}},2719:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`/Users/wangchunhao/github /AI-Thesis-Formatter/frontend/app/documents/page.tsx`),{__esModule:r,$$typeof:n}=a,i=a.default},2917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>r});var a=s(5036);s(7272);let r={title:"論文格式調整系統",description:"自動將您的論文調整為符合學校規定的格式",keywords:["論文","格式調整","排版","學術論文"]};function n({children:e}){return(0,a.jsxs)("html",{lang:"zh-TW",children:[(0,a.jsxs)("head",{children:[a.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),a.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),a.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",rel:"stylesheet"})]}),a.jsx("body",{children:(0,a.jsxs)("div",{className:"page-wrapper",children:[a.jsx("header",{className:"header",children:(0,a.jsxs)("div",{className:"container header-content",children:[(0,a.jsxs)("a",{href:"/",className:"logo",children:[a.jsx("span",{className:"logo-icon",children:"\uD83D\uDCC4"}),a.jsx("span",{children:"論文格式調整系統"})]}),(0,a.jsxs)("nav",{className:"nav-links",children:[a.jsx("a",{href:"/",className:"nav-link",children:"首頁"}),a.jsx("a",{href:"/upload",className:"nav-link",children:"上傳文件"}),a.jsx("a",{href:"/documents",className:"nav-link",children:"我的文件"})]})]})}),a.jsx("main",{className:"main-content",children:e}),a.jsx("footer",{className:"footer",children:(0,a.jsxs)("div",{className:"container footer-content",children:[a.jsx("p",{className:"footer-text",children:"\xa9 2026 論文格式調整系統 — Spec v1"}),a.jsx("p",{className:"footer-text",children:"讓您的論文格式完美符合學校規定"})]})})]})})]})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[22,506],()=>s(3639));module.exports=a})();